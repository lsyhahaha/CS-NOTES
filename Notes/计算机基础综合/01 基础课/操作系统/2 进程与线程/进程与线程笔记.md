[TOC]



# 2.1线程与进程

### 2.1.1进程的概念和特征

###### 进程的概念(Process)

**PCB概念：**为了使参与并发执行的每个程序（含数据）都能独立地运行，必须为之配置一个专门的数据结构，称为进程控制块。

系统利用PCB来描述进程的基本情况和运行状态，进而控制和管理进程。

**进程实体（又称为进程映像）：**程序段+相关数据段+PCB = 进程实体。



Notes:

- 进程映像是静态的，进程是动态的。
- PCB是进程存在的唯一标志。



**进程的三种定义（三种角度）：**

1. 进程是程序的一次执行过程；
2. 进程是一个程序及其数据在处理机上顺序执行时所发生的活动；
3. 进程是具有独立功能的程序在一个数据集合上运行的过程，它是系统进行资源分配和调度的一个独立单位。
4. 或者说，进程是进程实体的运行过程，是系统进程资源分配和调度的一个独立单位。

其中，系统资源是指处理机、存储器和其他设备服务于某个进程的“时间”。

<img src="https://cdn.jsdelivr.net/gh/lsyhahaha/Mytypora/img/202308081551930.png" alt="image-20230808155137758" style="zoom:50%;" />



###### 进程和程序的区别？

![image-20230808155320938](https://cdn.jsdelivr.net/gh/lsyhahaha/Mytypora/img/202308081553018.png)



###### 进程的特征（通常不会考察有什么特性，不必记忆特性，理解即可）

<img src="https://cdn.jsdelivr.net/gh/lsyhahaha/Mytypora/img/202308081552946.png" alt="image-20230808155241797" style="zoom:50%;" />

1. 动态性（最基本的特征）

2. 并发性

3. 独立性

4. 异步性

5. 结构性

   



### 2.1.2进程的状态与转换（前三种是基本状态）

<img src="https://cdn.jsdelivr.net/gh/lsyhahaha/Mytypora/img/202308081600942.png" alt="image-20230808160045814" style="zoom: 67%;" />

<img src="https://cdn.jsdelivr.net/gh/lsyhahaha/Mytypora/img/202308081601961.png" alt="image-20230808160117763" style="zoom:67%;" />

###### 运行态：

###### 就绪态：

###### 阻塞态（等待态）：

###### 创建态：

###### 结束态：

###### 3种基本状态之间的转换



### 2.1.3进程的组织

###### 进程控制块（PCB）【process control block】

**概念：**为了使参与并发执行的每个程序（含数据）都能独立地运行，必须为之配置一个专门的数据结构，称为进程控制块。

###### 程序段

###### 数据段



###### 链接方式

![image-20230808160245268](https://cdn.jsdelivr.net/gh/lsyhahaha/Mytypora/img/202308081602394.png)

###### 索引方式

![image-20230808160309735](https://cdn.jsdelivr.net/gh/lsyhahaha/Mytypora/img/202308081603866.png)

### 知识回顾与重要考点

![image-20230808160426698](https://cdn.jsdelivr.net/gh/lsyhahaha/Mytypora/img/202308081604917.png)



### 2.1.4进程控制

###### 为什么进程控制需要“一气呵成”？

###### 使用“关中断指令”和“开中断指令”这两个特权指令实现原子性。



###### 进程的创建

![image-20230808160958239](https://cdn.jsdelivr.net/gh/lsyhahaha/Mytypora/img/202308081609389.png)

###### 进程的终止

###### 进程的阻塞和唤醒



### 2.1.5进程的通信

###### 存储共享

###### 消息传递

###### 管道通信



### 2.1.6线程和多线程模型

###### 线程的基本概念

###### 线程与进程的比较

###### 线程的属性

###### 线程的状态与转换

###### 线程的组织与控制

###### 线程的实现方式

###### 多线程模型



### 2.1.7本章小结

### 2.1.8课后习题（P47~53）

小题（58个）：

大题（7个）：



### 2.1.9答案





# 2.2处理机调度

### 2.2.1调度的概念

###### 调度的基本概念

###### 调动的层次

###### 三级调度的联系



### 2.2.2调度的目标







### 2.2.3调动的实现

###### 调动程序（调度器）

###### 调度的时机、切换与过程

###### 进程调动方式

###### 闲逛进程

###### 两种线程的调度



### 2.2.4典型的调度算法

###### 先来先服务调度算法（FCFS）

###### 短作业优先调度算法（SJF）

###### 优先级调度算法

###### 高响应调度算法

###### 时间片轮转调度算法

###### 多级队列调度算法

###### 多级反馈队列调度算法（融合了前几中算法的特点）



### 2.2.5进程切换

###### 上下文切换

###### 上下文切换的消耗

###### 上下文切换与模式切换



### 2.2.6本节小结

###### 为什么要进行处理机调度？

###### 调度算法有哪几种？结合实时操作系统和分时操作系统，思考有没有哪种调度算法比较适合这两种系统？





### 2.2.7课后习题（p71~78）

小题（36）：

大题（12）：

### 2.2.8答案







# 2.3同步与互斥

### 2.3.1同步与互斥的基本概念

### 2.3.2实现临界区互斥的基本方法

### 2.3.3互斥锁

### 2.3.4信号量

### 2.3.5管程

### 2.3.6经典同步问题

### 2.3.7本节小结

### 2.3.8课后习题

### 2.3.9答案







# 2.4死锁

### 2.4.1死锁的概念

### 2.4.2死锁预防

### 2.4.3死锁避免

### 2.4.4死锁检测和解除

### 2.4.5本节小结

### 2.4.6课后习题

### 2.4.7答案



# 2.5本章疑难点